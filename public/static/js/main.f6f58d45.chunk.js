(this["webpackJsonpPropagate-client"]=this["webpackJsonpPropagate-client"]||[]).push([[0],{136:function(e,t,a){},161:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(13),c=a.n(s),i=(a(136),a(10)),o=a(8),l=a.n(o),u=a(14),j=a(19),d=a(20),p=a(22),h=a(21),b=a(15),m=a(16),x=a(11),f=a.n(x),g="https://letspropagate.herokuapp.com/api",O="https://letspropagate.herokuapp.com/api/chat",v=a(233),y=a(1);var w=function(e){var t=e.onSignUp,a=e.errorMessage;return Object(y.jsxs)("div",{children:[Object(y.jsxs)("form",{onSubmit:t,children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"InputUsername",children:"username"}),Object(y.jsx)("input",{type:"text",className:"form-control",id:"InputUsername",name:"username"})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(y.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"}),Object(y.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(y.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),Object(y.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]}),a?Object(y.jsx)("p",{children:a}):null]})};var C=function(e){return Object(y.jsxs)("form",{onSubmit:e.onSignIn,children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(y.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(y.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),Object(y.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),e.errorMessage?Object(y.jsx)("p",{children:e.errorMessage}):null]})},S=a(118),k=a.n(S);var I=function(e){var t=e.onSuccess,a=e.onFailure;return Object(y.jsx)("div",{children:Object(y.jsx)(k.a,{clientId:"".concat("603085994788-smdtl36j1veesrhj9r33vufoa6f5a4n0.apps.googleusercontent.com"),buttonText:"Login",onSuccess:t,onFailure:a,cookiePolicy:"single_host_origin"})})},N=a(231),U=a(260),M=a(234),D=a(84),P=a(259),B=a(232),L=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).handleChange=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState((function(e){return{plant:Object(i.a)(Object(i.a)({},e.plant),{},{available:t.target.checked}),available:t.target.checked}}));case 2:return console.log("state log before axios",n.state.plant),e.next=5,f.a.patch("".concat(g,"/user/plant/").concat(n.state.plant._id),{plant:n.state.plant},{withCredentials:!0});case 5:return a=e.sent,console.log("response",a.data),e.next=9,n.setState({plant:a.data});case 9:console.log("state after update from response",n.state.plant);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={plant:n.props.plant,available:n.props.plant.available},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.plant,t=e._id,a=e.displayName,n=e.scientificName,r=e.plantImageUrl;return Object(y.jsx)("div",{style:{border:"#BBB 1px solid",marginBottom:"10px"},children:Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between"},children:[Object(y.jsx)("img",{src:r,alt:n,style:{height:"100px",width:"100px"}}),Object(y.jsxs)("div",{style:{height:"auto",display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(y.jsx)(D.a,{variant:"h4",children:a}),Object(y.jsx)(D.a,{variant:"subtitle1",children:n})]}),Object(y.jsxs)("div",{style:{height:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(y.jsx)(m.b,{to:"/user/plant/".concat(t,"/edit"),children:Object(y.jsx)(N.a,{children:Object(y.jsx)(B.a,{})})}),Object(y.jsx)(P.a,{checked:this.state.available,color:"secondary",onChange:this.handleChange,name:n})]})]})})}}]),a}(n.Component),F=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("".concat(g,"/whoami"),{withCredentials:!0});case 2:return a=t.sent,console.log("PrivateProfile User data:",a.data),t.next=6,e.setState({user:a.data,fetchingUser:!1});case 6:case"end":return t.stop()}}),t)}))),e.state={user:null,fetchingUser:!0},e}return Object(d.a)(a,[{key:"render",value:function(){if(this.state.fetchingUser)return Object(y.jsx)(v.a,{});var e=this.state.user,t=e.profileImageUrl,a=e.plantsOffered,n=e.username;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{style:{margin:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(y.jsx)(N.a,{onClick:this.props.onLogOut,label:"Logout",style:{alignSelf:"flex-end"},children:Object(y.jsx)(M.a,{fontSize:"large"})}),Object(y.jsx)(U.a,{alt:n,src:t}),Object(y.jsx)(m.b,{to:"/user/edit-profile",children:"edit profile"})]}),Object(y.jsxs)("div",{children:[this.state.user?a.map((function(e,t){return Object(y.jsx)(L,{plant:e},t)})):"You have no plants offered. Add some now!",Object(y.jsx)("div",{style:{color:"red",display:"flex",justifyContent:"center",margin:"100px"}})]})]})}}]),a}(n.Component),A=a(256),E=a(235),_=a(240),W=a(241),G=a(26),T=a(258),z=a(239),H=a(237),V=a(238),Y=a(236);function J(e){var t=r.a.useState(!1),a=Object(G.a)(t,2),n=a[0],s=a[1],c=function(){s(!1)};return Object(y.jsxs)("div",{children:[Object(y.jsx)(E.a,{variant:"outlined",color:"error",onClick:function(){s(!0)},children:"Delete Account"}),Object(y.jsxs)(T.a,{open:n,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(y.jsx)(Y.a,{id:"alert-dialog-title",children:"Delete Account?"}),Object(y.jsx)(H.a,{children:Object(y.jsx)(V.a,{id:"alert-dialog-description",children:"If you click delete your account will be permanently removed."})}),Object(y.jsxs)(z.a,{children:[Object(y.jsx)(E.a,{onClick:c,color:"primary",children:"Cancel"}),Object(y.jsx)(E.a,{onClick:e.onDelete,color:"errro",autoFocus:!0,children:"Delete"})]})]})]})}var R=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null,fetchingUser:!0},e.componentDidMount=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get("".concat(g,"/user/whoami"),{withCredentials:!0});case 3:a=t.sent,console.log("Edit Profile CDM get user",a.data),e.setState({user:a.data,fetchingUser:!1}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("EDIT User fetch failed",t.t0),e.setState({fetchingUser:!1});case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.handleUsernameChange=function(t){var a=t.target.value;e.setState({user:Object(i.a)(Object(i.a)({},e.state.user),{},{username:a})})},e.handleAboutChange=function(t){var a=t.target.value;e.setState({user:Object(i.a)(Object(i.a)({},e.state.user),{},{about:a})})},e.handleEmailChange=function(t){var a=t.target.value;e.setState({user:Object(i.a)(Object(i.a)({},e.state.user),{},{email:a})})},e.handleUpdateProfile=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("state log before axios",e.state.user),t.next=3,f.a.patch("".concat(g,"/user/profile"),{user:e.state.user},{withCredentials:!0});case 3:return a=t.sent,console.log("patch User response",a.data),t.next=7,e.setState({user:a.data});case 7:console.log("state after update from response",e.state.user),e.props.history.goBack();case 9:case"end":return t.stop()}}),t)}))),e.handleDelete=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.delete("".concat(g,"/user/profile/").concat(e.state.user._id),{},{withCredentials:!0});case 3:return t.sent,t.next=6,f.a.post("".concat(g,"/logout"),{},{withCredentials:!0});case 6:t.sent,e.setState({user:null},(function(){e.props.history.push("/")})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Logout failed",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e}return Object(d.a)(a,[{key:"render",value:function(){if(this.state.fetchingUser)return Object(y.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(y.jsx)(v.a,{})});var e=this.state.user,t=e.profileImageUrl,a=e.username,n=e.about,r=e.firstName,s=(e.lastName,e.email);return a=a||(r||null),console.log(this.state.user),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"5px"},children:[Object(y.jsx)(N.a,{onClick:this.props.history.goBack,style:{alignSelf:"start"},children:Object(y.jsx)(_.a,{})}),Object(y.jsx)("h3",{children:" Edit Profile"}),Object(y.jsx)(U.a,{src:t,alt:a,style:{width:"30vw",height:"30vw",maxWidth:"150px",maxHeight:"150px"}}),Object(y.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(y.jsx)(A.a,{onChange:this.handleUsernameChange,id:"username",label:"Username",defaultValue:a,margin:"normal",variant:"outlined"}),Object(y.jsx)("br",{}),Object(y.jsx)(A.a,{onChange:this.handleAboutChange,id:"about",label:"About Me",defaultValue:n,multiline:!0,rows:4,margin:"normal",variant:"outlined"}),Object(y.jsx)("br",{}),Object(y.jsx)(A.a,{onChange:this.handleEmailChange,id:"email",label:"Email",defaultValue:s,margin:"normal",variant:"outlined"}),Object(y.jsx)("br",{})]}),Object(y.jsx)(E.a,{onClick:this.handleUpdateProfile,variant:"contained",color:"primary",size:"large",startIcon:Object(y.jsx)(W.a,{}),children:" Save "}),Object(y.jsx)("div",{style:{color:"red",display:"flex",justifyContent:"center",margin:"100px"},children:Object(y.jsx)(J,{onDelete:this.handleDelete})})]})}}]),a}(n.Component),Z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={me:null},n.state={me:n.props.me,allChats:[{them:"Dave",chat:"Hi George! I'm insterested in the Ficus you have available."},{them:"Bob",chat:"heyyyy"},{them:"Guiiii",chat:"oh hai"}]},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.allChats;return Object(y.jsxs)("div",{style:{padding:"10px"},children:[Object(y.jsx)(D.a,{variant:"h4",children:"Messages"}),Object(y.jsx)("hr",{}),e.map((function(e){return Object(y.jsx)(m.b,{to:"/chat/".concat(e.them),children:Object(y.jsxs)("div",{style:{border:"grey 1px solid",height:"75px",display:"flex",flexDirection:"row",alignItems:"center",justifyContents:"center"},children:[Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(U.a,{alt:e.them,src:e.them})}),Object(y.jsxs)("div",{style:{overflow:"clip",padding:"5px",width:"100%"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[Object(y.jsx)(D.a,{variant:"h6",children:e.them}),Object(y.jsx)(D.a,{variant:"caption",children:"Tuesday 4pm"})]}),Object(y.jsxs)(D.a,{variant:"body2",noWrap:!0,display:"block",children:[e.chat," "]})]})]})},"chat-".concat(e.them))}))]})}}]),a}(n.Component),q=a(242),K=a(243);function Q(e){var t=e.plant,a=t._id,n=t.displayName,r=t.location,s=t.scientificName,c=t.plantImageUrl,i=t.user,o=i.username,l=i._id,u=i.profileImageUrl;return Object(y.jsx)("div",{style:{border:"#BBB 1px solid",margin:"2px",marginBottom:"10px"},children:Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between",padding:"none"},children:[Object(y.jsx)("img",{src:c,alt:s,style:{height:"25vw",width:"25vw",maxHeight:"100px",maxWidth:"100px"}}),Object(y.jsxs)("div",{style:{paddingLeft:"5px",width:"50vw",height:"auto",display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(y.jsx)(D.a,{variant:"h5",children:n}),Object(y.jsx)(D.a,{variant:"subtitle1",children:s}),Object(y.jsx)(D.a,{variant:"subtitle2",children:r})]}),Object(y.jsxs)("div",{style:{height:"auto",width:"25vw",maxWidth:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(y.jsx)(m.b,{to:{pathname:"/users/".concat(l),state:{plant:a}},children:Object(y.jsx)(U.a,{alt:o,src:u})}),Object(y.jsx)(D.a,{varient:"caption",align:"center",children:o})]})]})})}var X=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={allPlants:null,filteredPlants:null,loading:!0},e.handleSearch=function(t){var a=e.state.allPlants,n=t.target.value,r=a.filter((function(e){return"".concat(e.scientificName," ").concat(e.displayName," ").concat(e.commonName[0]," ").concat(e.commonName[1]," ").concat(e.commonName[2]).toLowerCase().includes(n.toLowerCase())}));e.setState({filteredPlants:r})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(g,"/search"),{withCredentials:!0});case 2:t=e.sent,console.log("ALL PLANTS",t.data),this.setState({allPlants:t.data,filteredPlants:t.data,loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?Object(y.jsx)(v.a,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)(A.a,{id:"searchBar",label:"Search for plants...",onChange:this.handleSearch,variant:"outlined",autoComplete:"false",autoFocus:!0,fullWidth:!0,InputProps:{startAdornment:Object(y.jsxs)(q.a,{position:"start",children:[" ",Object(y.jsx)(K.a,{})," "]})}}),this.state.filteredPlants.map((function(e,t){return Object(y.jsx)(Q,{plant:e},t)}))]})}}]),a}(n.Component),$=a(244),ee=a(247),te=a(249),ae=a(250),ne=a(251),re=a(245),se=a(246),ce=a(248),ie=Object($.a)((function(e){return{text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2)},subheader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"}}}));function oe(e){var t=ie();console.log("Navbar props:",e);var a=e.user;return Object(y.jsx)(r.a.Fragment,{children:Object(y.jsx)(re.a,{position:"fixed",color:"primary",className:t.appBar,children:Object(y.jsxs)(se.a,{children:[Object(y.jsx)(N.a,{edge:"start",color:"inherit",children:Object(y.jsx)(m.b,{underline:"none",to:"/user/profile",children:Object(y.jsx)(U.a,{alt:a.username,src:a.profileImageUrl})})}),Object(y.jsx)(N.a,{color:"inherit",children:Object(y.jsxs)(m.b,{underline:"none",to:"/user/chats",children:[" ",Object(y.jsx)(ee.a,{fontSize:"large"})," "]})}),Object(y.jsx)(ce.a,{color:"secondary","aria-label":"add",className:t.fabButton,children:Object(y.jsxs)(m.b,{underline:"none",to:"/addplant",children:[" ",Object(y.jsx)(te.a,{})," "]})}),Object(y.jsx)("div",{className:t.grow}),Object(y.jsx)(N.a,{color:"inherit",children:Object(y.jsxs)(m.b,{underline:"none",color:"white",to:"/map",children:[" ",Object(y.jsx)(ae.a,{fontSize:"large"})," "]})}),Object(y.jsx)(N.a,{edge:"end",children:Object(y.jsxs)(m.b,{underline:"none",to:"/search",children:["  ",Object(y.jsx)(ne.a,{fontSize:"large"})," "]})})]})})})}function le(){return Object(y.jsx)("div",{children:Object(y.jsxs)("form",{method:"POST",action:"".concat(g,"/plant/upload"),encType:"multipart/form-data",children:[Object(y.jsx)("input",{type:"file",name:"imageUrl",accept:"image/png, image/jpg"}),Object(y.jsxs)("select",{name:"organ",children:[Object(y.jsx)("option",{value:"leaf",children:"Leaf"}),Object(y.jsx)("option",{value:"flower",children:"flower"})]}),Object(y.jsx)("button",{type:"submit",children:"Submit"})]})})}var ue=a(123),je=a.n(ue),de=function(){var e=r.a.useRef(null),t=r.a.useState(null),a=Object(G.a)(t,2),s=a[0],c=a[1],i=r.a.useCallback((function(){var t=e.current.getScreenshot();c(t),console.log(typeof t)}),[e,c]);return Object(n.useEffect)((function(){f()({method:"post",url:"".concat(g,"/picture/upload"),data:s}).then((function(){console.log("YASSS")})).catch((function(e){return console.log(e)}))}),[s]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(je.a,{videoConstraints:{facingMode:"user"},audio:!1,ref:e,screenshotFormat:"image/png"}),Object(y.jsx)("button",{onClick:i,children:"Capture photo"}),s&&Object(y.jsx)("img",{src:s,alt:"pic"})]})};function pe(e){var t=e.onImageUpload;return Object(y.jsx)("div",{children:Object(y.jsxs)("form",{onSubmit:t,children:[Object(y.jsx)("input",{type:"file",name:"imageUrl",accept:"image/png, image/jpg"}),Object(y.jsxs)("select",{name:"organ",children:[Object(y.jsx)("option",{value:"leaf",children:"Leaf"}),Object(y.jsx)("option",{value:"flower",children:"Flower"}),Object(y.jsx)("option",{value:"fruit",children:"Fruit"}),Object(y.jsx)("option",{value:"bark",children:"bark"})]}),Object(y.jsx)("button",{type:"submit",children:"Submit"})]})})}function he(e){var t=e.plantInfo,a=e.onAddingPlant;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:t.plant.species.scientificNameWithoutAuthor}),Object(y.jsx)("img",{src:t.picture,alt:"plant",width:"100px"}),Object(y.jsxs)("form",{onSubmit:a,children:[Object(y.jsx)("label",{for:"name",children:"Pick a name"}),Object(y.jsx)("select",{name:"plantName",children:t.plant.species.commonNames.map((function(e,t){return Object(y.jsx)("option",{value:e,children:e},t)}))})," ",Object(y.jsx)("br",{}),Object(y.jsx)("label",{for:"city",children:"city"}),Object(y.jsx)("input",{type:"text",id:"city",name:"city"})," ",Object(y.jsx)("br",{}),Object(y.jsx)("button",{type:"submit",children:"Submit"})]})]})}var be=function(e){var t=Object(n.useState)({}),a=Object(G.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!0),i=Object(G.a)(c,2),o=i[0],j=i[1];function d(){return(d=Object(u.a)(l.a.mark((function e(t){var a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.imageUrl.files[0],n=t.target.organ.value,(r=new FormData).append("imageUrl",a),r.append("organ",n),e.next=8,f()({method:"post",url:"".concat(g,"/plant/upload"),data:r});case 8:c=e.sent,s(c.data),j(!1),console.log(c.data);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,{plantImageUrl:r.picture,displayName:a.target.plantName.value,scientificName:r.plant.species.scientificNameWithoutAuthor,commonName:r.plant.species.commonNames,location:a.target.city.value};case 3:return n=t.sent,console.log(n.location),t.next=7,f()({method:"post",url:"".concat(g,"/plant/add"),data:n,withCredentials:!0});case 7:e.history.push("/user/profile");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(y.jsxs)("div",{children:[o&&Object(y.jsx)(pe,{onImageUpload:function(e){return d.apply(this,arguments)}}),!o&&Object(y.jsx)(he,{plantInfo:r,onAddingPlant:function(e){return p.apply(this,arguments)}})]})},me=a(252),xe=a(261),fe=a(253),ge=a(254);a(160);var Oe=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=(t[0],t[1],[Number("52.39709954999999"),4.648121325]);return Object(y.jsx)("div",{children:Object(y.jsxs)(me.a,{style:{width:"800px",height:"500px"},center:a,zoom:13,scrollWheelZoom:!0,children:[Object(y.jsx)(xe.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(y.jsx)(fe.a,{position:a,children:Object(y.jsxs)(ge.a,{children:["PLANT ",Object(y.jsx)("br",{})," Easily customizable."]})})]})})},ve=a(255),ye=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.plant,t=(e._id,e.displayName),a=e.location,n=e.scientificName,r=e.plantImageUrl,s=e.user,c=s.username;s._id;return Object(y.jsx)("div",{style:{border:"#BBB 1px solid",margin:"2px",marginBottom:"10px"},children:Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between",padding:"none"},children:[Object(y.jsx)("img",{src:r,alt:n,style:{height:"25vw",width:"25vw",maxHeight:"100px",maxWidth:"100px"}}),Object(y.jsxs)("div",{style:{paddingLeft:"5px",width:"50vw",height:"auto",display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(y.jsx)(D.a,{variant:"h5",children:t}),Object(y.jsx)(D.a,{variant:"subtitle1",children:n}),Object(y.jsx)(D.a,{variant:"subtitle2",children:a}),Object(y.jsx)("p",{children:"".concat(this.props.plant.city," ").concat(t)})]}),Object(y.jsxs)("div",{style:{height:"auto",width:"25vw",maxWidth:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(y.jsxs)(N.a,{onClick:this.props.onChatClick,children:[Object(y.jsx)(ee.a,{})," "]}),Object(y.jsx)(D.a,{varient:"caption",align:"center",children:c})]})]})})}}]),a}(n.Component),we=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={them:null,fetchingUser:!0,me:null},e.componentDidMount=Object(u.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.userId,n=e.props.me,t.next=4,f.a.get("".concat(g,"/users/").concat(a),{withCredentials:!0});case 4:return r=t.sent,console.log("Public User data:",r.data),t.next=8,e.setState({them:r.data,fetchingUser:!1,me:n});case 8:case"end":return t.stop()}}),t)}))),e.handleChatClick=Object(u.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.state.me.username,e.state.them.username),e.state.me){t.next=5;break}e.props.history.push("/signin"),t.next=10;break;case 5:return a={participants:[e.state.them._id,e.state.me._id]},t.next=8,f.a.post("".concat(O,"/conversation"),a,{withCredentials:!0});case 8:n=t.sent,e.props.history.push("/chat/".concat(n.data._id));case 10:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;if(this.state.fetchingUser)return Object(y.jsx)(v.a,{});var t=this.state,a=t.them,n=(t.me,this.props.routeProps);return Object(y.jsxs)("div",{style:{margin:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(y.jsx)(U.a,{alt:a.username,src:a.profileImageUrl,style:{height:"30vw",width:"30vw",maxHeight:"150px",maxWidth:"150px"}}),Object(y.jsx)("h1",{children:this.state.them.username}),Object(y.jsx)(D.a,{variant:"subtitle2",color:"textSecondary",gutterBottom:!0,children:this.state.them.about}),Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ve.a,{})}),a.plantsOffered.map((function(t,a){return Object(y.jsx)(ye,Object(i.a)({plant:t,onChatClick:e.handleChatClick},n),a)}))]})}}]),a}(n.Component),Ce=a(83),Se=(a(161),a(124)),ke=a.n(Se),Ie="",Ne=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).messagesEnd=r.a.createRef(),e.state={loading:!0,messageList:[],currentMessage:""},e.scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:"smooth"})},e.handleMessageInput=function(t){e.setState({currentMessage:t.target.value})},e.sendMessage=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={chatId:e.props.match.params.chatId,content:{sender:e.props.me,message:e.state.currentMessage}},t.next=3,Ie.emit("send_message",a);case 3:e.setState({messageList:[].concat(Object(Ce.a)(e.state.messageList),[a.content]),currentMessage:""},(function(){e.scrollToBottom()}));case 4:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;Ie=ke()("".concat("https://letspropagate.herokuapp.com"));var t=this.props.match.params.chatId;f.a.get("".concat(O,"/messages/").concat(t)).then((function(t){console.log(t),e.setState({loading:!1,messageList:t.data},(function(){e.scrollToBottom()}))})),Ie.emit("join_chat",t),Ie.on("receive_message",(function(t){console.log("Got data",t),e.setState({messageList:[].concat(Object(Ce.a)(e.state.messageList),[t])},(function(){e.scrollToBottom()}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.loading,t.messageList),n=this.props.me;return n?Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{children:"You're in the Chat Page "}),Object(y.jsxs)("div",{className:"chatContainer",children:[Object(y.jsxs)("div",{className:"messages",children:[a.map((function(e){return Object(y.jsx)("div",{className:"messageContainer",id:e.sender.name==n.name?"You":"Other",children:Object(y.jsxs)("div",{className:"messageIndividual",children:[e.sender.name,": ",e.message]})},e._id)})),Object(y.jsx)("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]}),Object(y.jsxs)("div",{className:"messageInputs",children:[Object(y.jsx)("input",{value:this.state.currentMessage,type:"text",placeholder:"Message...",onChange:this.handleMessageInput}),Object(y.jsx)("button",{onClick:this.sendMessage,children:"Send"})]})]})]}):Object(y.jsx)(b.a,{to:"/signin"})}}]),a}(n.Component);var Ue=function(){return Object(y.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"10px"},children:Object(y.jsx)(D.a,{variant:"h5",children:"404: Not Found"})})},Me=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null,plantImage:null,errorMessage:null,fetchingUser:!0,showLoading:null},e.componentDidMount=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get("".concat(g,"/whoami"),{withCredentials:!0});case 3:return a=t.sent,console.log("App.js CDM whoami user",a.data),t.next=7,e.setState({user:a.data,fetchingUser:!1});case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,e.setState({fetchingUser:!1});case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.handleSignUp=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,s,c,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a.target.username.value),a.preventDefault(),n=a.target,r=n.username,s=n.email,c=n.password,i={username:r.value,email:s.value,password:c.value},t.prev=4,t.next=7,f.a.post("".concat(g,"/signup"),i);case 7:(o=t.sent).data.errorMessage&&e.setState({errorMessage:o.data.errorMessage}),e.props.history.push("/"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log("Appjs Signup failed",t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSignIn=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,s,c,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=a.target,r=n.email,s=n.password,c={email:r.value,password:s.value},t.prev=3,t.next=6,f.a.post("".concat(g,"/signin"),c,{withCredentials:!0});case 6:i=t.sent,e.setState({user:i.data},(function(){e.props.history.push("/user/profile")})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.log("Signin failed",t.t0.response.data),e.setState({errorMessage:t.t0.response.data.error});case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleGoogleSuccess=function(t){e.setState({showLoading:!0});var a=t.profileObj,n=a.givenName,r=a.familyName,s=a.email,c=a.imageUrl,i=a.googleId,o={firstName:n,lastName:r,username:"".concat(n," ").concat(r),email:s,profileImageUrl:c,googleId:i};console.log(o),f.a.post("".concat(g,"/google/info"),o,{withCredentials:!0}).then((function(t){console.log("GoogleSignUp:",t),e.setState({user:t.data.data,errorMessage:null,showLoading:!1},(function(){e.props.history.push("/user/profile")}))}))},e.handleGoogleFailure=function(){console.log("failed google auth")},e.handleLogOut=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post("".concat(g,"/logout"),{},{withCredentials:!0});case 3:e.setState({user:null},(function(){e.props.history.push("/")})),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("Logout failed",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return this.state.fetchingUser?Object(y.jsx)(v.a,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{src:"/images/propagate-med.svg",alt:"propagate app"}),Object(y.jsxs)(b.d,{children:[Object(y.jsx)(b.b,{exact:!0,path:"/",render:function(t){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(C,Object(i.a)({errorMessage:e.state.errorMessage,onSignIn:e.handleSignIn},t)),Object(y.jsx)(I,{onSuccess:e.handleGoogleSuccess,onFailure:e.handleGoogleFailure}),Object(y.jsx)(m.b,{to:"/signup",children:"sign up?"})]})}}),Object(y.jsx)(b.b,{path:"/signup",render:function(t){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(w,Object(i.a)({errorMessage:e.state.errorMessage,onSignUp:e.handleSignUp},t)),Object(y.jsx)(I,{onSuccess:e.handleGoogleSuccess,onFailure:e.handleGoogleFailure})]})}}),Object(y.jsx)(b.b,{exact:!0,path:"/signin",render:function(t){return Object(y.jsx)(C,Object(i.a)({errorMessage:e.state.errorMessage,onSignIn:e.handleSignIn},t))}}),Object(y.jsx)(b.b,{exact:!0,path:"/user/profile",render:function(t){return Object(y.jsx)(F,Object(i.a)({user:e.state.user,onLogOut:e.handleLogOut},t))}}),Object(y.jsx)(b.b,{exact:!0,path:"/user/edit-profile",render:function(e){return Object(y.jsx)(R,Object(i.a)({},e))}}),Object(y.jsx)(b.b,{exact:!0,path:"/users/:userId",render:function(t){return Object(y.jsx)(we,Object(i.a)({me:e.state.user},t))}}),Object(y.jsx)(b.b,{exact:!0,path:"/chats",render:function(t){return Object(y.jsx)(Z,Object(i.a)({me:e.state.user},t))}}),Object(y.jsx)(b.b,{path:"/chat/:chatId",render:function(t){return Object(y.jsx)(Ne,Object(i.a)({me:e.state.user},t))}}),Object(y.jsx)(b.b,{exact:!0,path:"/search",render:function(e){return Object(y.jsx)(X,Object(i.a)({},e))}}),Object(y.jsx)(b.b,{path:"/image-upload",render:function(e){return Object(y.jsx)(le,Object(i.a)({},e))}}),Object(y.jsx)(b.b,{path:"/addplant",render:function(e){return Object(y.jsx)(be,Object(i.a)({},e))}}),Object(y.jsx)(b.b,{path:"/maps",render:function(e){return Object(y.jsx)(Oe,Object(i.a)({},e))}}),Object(y.jsx)(b.b,{path:"/capture",render:function(e){return Object(y.jsx)(de,{})}}),Object(y.jsx)(b.b,{component:Ue})]}),this.state.user?Object(y.jsx)(oe,{user:this.state.user}):null]})}}]),a}(n.Component),De=Object(b.g)(Me);c.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(m.a,{children:Object(y.jsx)(De,{})})}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.f6f58d45.chunk.js.map